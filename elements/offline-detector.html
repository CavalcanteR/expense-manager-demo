<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../scripts/offline.html">

<dom-module id="offline-detector">
  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'offline-detector',

        properties: {
          online: {
            type: Boolean,
            notify: true
          }
        },

        ready: function() {
          var _this = this;
          Offline.options = {requests: false};

          this.online = Offline.state === 'up';

          Offline.on('up', function() {
            console.log('Server connection resumed');
            _this.online = true;
          });
          Offline.on('down', function() {
            console.log('Lost server connection.');
            _this.online = false;
          });
        }
      });
    })();
  </script>
</dom-module>
